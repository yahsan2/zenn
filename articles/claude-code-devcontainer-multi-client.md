---
title: "å€‹äººç”¨ã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆä¼šç¤¾ï¼‰ç”¨ã® Claude Code ã‚’ä½µç”¨ã™ã‚‹æ–¹æ³• - Dev Container + ãƒœãƒªãƒ¥ãƒ¼ãƒ åˆ†é›¢ã§å®‰å…¨ã«"
emoji: "ğŸ”"
type: "tech"
topics: ["claudecode", "devcontainer", "docker", "security", "freelance"]
published: true
---

## ã“ã®è¨˜äº‹ã‚’èª­ã‚€ã¹ãäºº

- ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ»ã‚³ãƒ³ã‚µãƒ«ã‚¿ãƒ³ãƒˆ
- è¤‡æ•°ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æŠ±ãˆã¦ã„ã‚‹é–‹ç™ºè€…
- å€‹äººãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ä»•äº‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¸¡ç«‹ã—ã¦ã„ã‚‹äºº
- Claude Code ã‚’å®‰å…¨ã«ä½¿ã„ãŸã„ã¨è€ƒãˆã¦ã„ã‚‹äºº

## ã‚ˆãã‚ã‚‹å›°ã‚Šã”ã¨

![](/images/claude-code-devcontainer-multi-client/robot-problem-risk.jpeg)

### ã‚·ãƒŠãƒªã‚ª 1: ã€Œèª¤ã£ã¦å€‹äººã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã—ã¾ã£ãŸ...ã€

ã‚ãªãŸã¯å€‹äººã®è¶£å‘³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ Claude Code ã‚’ä½¿ã£ã¦ã„ã¾ã—ãŸã€‚ã‚ã‚‹æ—¥ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ¯ãƒ¼ã‚¯ã§ Claude Code ã‚’èµ·å‹•ã—ãŸã‚‰ã€åŒã˜ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

**å•é¡Œç‚¹**:
- å€‹äººã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ä¼šè©±å±¥æ­´ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æ©Ÿå¯†ã‚³ãƒ¼ãƒ‰ãŒæ··ã–ã‚‹
- API ä½¿ç”¨æ–™é‡‘ã®è«‹æ±‚ã‚’åˆ†ã‘ã‚‰ã‚Œãªã„
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã€Œå€‹äººã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã—ãŸã€ã¨å ±å‘Šã—ã«ãã„
- ç›£æŸ»ã‚„ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã®è¦³ç‚¹ã§å•é¡Œã«ãªã‚‹å¯èƒ½æ€§

### ã‚·ãƒŠãƒªã‚ª 2: ã€Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ A ã®ã‚³ãƒ¼ãƒ‰ãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ B ã® Claude ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«...ã€

è¤‡æ•°ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’åŒæ™‚é€²è¡Œä¸­ã€‚Claude Code ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ A ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæ¥­å¾Œã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ B ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åˆ‡ã‚Šæ›¿ãˆãŸã‚‰ã€åŒã˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒç¶šã„ã¦ã„ã¾ã—ãŸã€‚

**å•é¡Œç‚¹**:
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ A ã®ã‚³ãƒ¼ãƒ‰ã‚„è¨­è¨ˆãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ B ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«æ®‹ã‚‹
- èª¤ã£ã¦åˆ¥ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®æƒ…å ±ã‚’å‚ç…§ã—ã¦ã—ã¾ã†
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é•åã®ãƒªã‚¹ã‚¯
- NDAï¼ˆç§˜å¯†ä¿æŒå¥‘ç´„ï¼‰é•åã®å¯èƒ½æ€§

## ã“ã®è¨˜äº‹ã®è§£æ±ºç­–: Dev Container + ãƒœãƒªãƒ¥ãƒ¼ãƒ åˆ†é›¢

ã“ã‚Œã‚‰ã®å•é¡Œã‚’**æŠ€è¡“çš„ã«å®Œå…¨ã«è§£æ±º**ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

:::message
Claude Code å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚‚ Dev Container ã®ä½¿ç”¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚
https://docs.anthropic.com/en/docs/claude-code/devcontainer
:::


### è§£æ±ºç­–ã®å…¨ä½“åƒ

```
å€‹äººãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
  â†’ devcontainer ã§ãƒ­ãƒ¼ã‚«ãƒ«ã® ~/.claude ã‚’ãƒã‚¦ãƒ³ãƒˆ
  â†’ è‡ªåˆ†ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãã®ã¾ã¾ä½¿ç”¨

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ Aï¼ˆä¾‹: client-aï¼‰
  â†’ å°‚ç”¨ã® devcontainer
  â†’ å°‚ç”¨ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼ˆclaude-client-aï¼‰
  â†’ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ A ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
  â†’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼é©ç”¨

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ Bï¼ˆä¾‹: client-bï¼‰
  â†’ å°‚ç”¨ã® devcontainer
  â†’ å°‚ç”¨ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼ˆclaude-client-bï¼‰
  â†’ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ B ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
  â†’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼é©ç”¨
```

**é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ**: å„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯**ç‰©ç†çš„ã«éš”é›¢ã•ã‚ŒãŸç’°å¢ƒ**ã§å‹•ä½œã—ã¾ã™ã€‚


### ãƒã‚¦ãƒ³ãƒˆæ–¹å¼ã®é•ã„

| ç”¨é€” | ãƒã‚¦ãƒ³ãƒˆæ–¹å¼ | è¨­å®šä¾‹ | ç‰¹å¾´ |
|------|-------------|--------|------|
| å€‹äººãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ | bind ãƒã‚¦ãƒ³ãƒˆ | `source=${localEnv:HOME}/.claude` | ãƒ­ãƒ¼ã‚«ãƒ«ã® `~/.claude` ã‚’ç›´æ¥å…±æœ‰ |
| ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ | Docker ãƒœãƒªãƒ¥ãƒ¼ãƒ  | `source=claude-client-a` | éš”é›¢ã•ã‚ŒãŸå°‚ç”¨é ˜åŸŸï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯ï¼‰ |

![Bind Mount vs Volume Mount ã®é•ã„](/images/claude-code-devcontainer-multi-client/bind-vs-volume-mount.jpeg)

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”¨ã® devcontainer ã¯ Docker ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’ä½¿ã†ãŸã‚ã€**ãƒ­ãƒ¼ã‚«ãƒ«ã® `~/.claude` ã«ã¯ç‰©ç†çš„ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“**ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç’°å¢ƒã‹ã‚‰å€‹äººã®èªè¨¼æƒ…å ±ã‚„å±¥æ­´ãŒæ¼ã‚Œã‚‹ã“ã¨ã‚’é˜²ãã¾ã™ã€‚

## ãªãœã“ã®æ–¹æ³•ãŒå„ªã‚Œã¦ã„ã‚‹ã®ã‹

### 1. å®Œå…¨ãªéš”é›¢ = æ··ã–ã‚‰ãªã„ä¿è¨¼

**Dev Container ã¨ã¯**:
- Docker ã‚³ãƒ³ãƒ†ãƒŠå†…ã§é–‹ç™ºç’°å¢ƒã‚’å‹•ã‹ã™ä»•çµ„ã¿
- å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒ**åˆ¥ã€…ã®ä»®æƒ³ãƒã‚·ãƒ³**ã®ã‚ˆã†ã«å‹•ä½œ
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ A ã®ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ B ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ç‰©ç†çš„ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„

**ãƒœãƒªãƒ¥ãƒ¼ãƒ åˆ†é›¢ã¨ã¯**:
- Claude Code ã®èªè¨¼æƒ…å ±ã‚„ã‚»ãƒƒã‚·ãƒ§ãƒ³å±¥æ­´ã‚’ä¿å­˜ã™ã‚‹å ´æ‰€
- `claude-client-a` ã¨ `claude-client-b` ã¯**å®Œå…¨ã«åˆ¥ã®å ´æ‰€**
- ä¸€æ–¹ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒä»–æ–¹ã«å½±éŸ¿ã™ã‚‹ã“ã¨ã¯**æŠ€è¡“çš„ã«ä¸å¯èƒ½**

### 2. å¤šå±¤çš„ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

Dev Container ã«ã‚ˆã‚‹**ç‰©ç†çš„ãªéš”é›¢**ã§ã€ã‚ˆã‚Šå …ç‰¢ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚

- ã‚³ãƒ³ãƒ†ãƒŠå¤–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ç‰©ç†çš„ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„
- ãƒ›ã‚¹ãƒˆãƒã‚·ãƒ³ã® `~/.ssh` ã‚„ `~/.aws` ãªã©ã®æ©Ÿå¯†æƒ…å ±ã‹ã‚‰ä¿è­·
- ä¸‡ãŒä¸€ã®äº‹æ•…ã§ã‚‚å½±éŸ¿ç¯„å›²ãŒã‚³ãƒ³ãƒ†ãƒŠå†…ã«é™å®šã•ã‚Œã‚‹

### 3. ç›£æŸ»è¨¼è·¡ã®æ˜ç¢ºåŒ–

**ãƒœãƒªãƒ¥ãƒ¼ãƒ  = ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ = ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ** ã¨ã„ã†å¯¾å¿œé–¢ä¿‚ã§ã€ç›£æŸ»ã‚„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«å¯¾å¿œã—ã‚„ã™ããªã‚Šã¾ã™ã€‚

### 4. ãƒ­ã‚°ã‚¤ãƒ³åˆ‡ã‚Šæ›¿ãˆã®æ‰‹é–“ã‚’è§£æ¶ˆ

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã”ã¨ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’åˆ†ã‘ã‚‹ã¨ã€æ¯å› `claude /logout` â†’ `claude /login` ã®åˆ‡ã‚Šæ›¿ãˆãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚Dev Container + ãƒœãƒªãƒ¥ãƒ¼ãƒ åˆ†é›¢ãªã‚‰ã€**ã‚³ãƒ³ãƒ†ãƒŠã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã ã‘ã§è‡ªå‹•çš„ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚‚åˆ‡ã‚Šæ›¿ã‚ã‚‹**ãŸã‚ã€ã“ã®æ‰‹é–“ãŒãªããªã‚Šã¾ã™ã€‚

## ä½¿ã„æ–¹: 2ã¤ã®æ–¹æ³•

Dev Container ã‚’ä½¿ã†æ–¹æ³•ã¯2ã¤ã‚ã‚Šã¾ã™ã€‚

### æ–¹æ³• 1: VS Code æ‹¡å¼µæ©Ÿèƒ½

VS Code ã«ã¯ **Dev Containers æ‹¡å¼µæ©Ÿèƒ½**ï¼ˆæ—§ Remote - Containersï¼‰ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚

1. VS Code ã«ã€ŒDev Containersã€æ‹¡å¼µæ©Ÿèƒ½ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã« `.devcontainer/devcontainer.json` ã‚’é…ç½®
3. ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆã‹ã‚‰ã€ŒDev Containers: Reopen in Containerã€ã‚’å®Ÿè¡Œ
4. ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ Claude Code æ‹¡å¼µæ©Ÿèƒ½ã‚’ä½¿ç”¨

VS Code ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯æœ€ã‚‚é¦´æŸ“ã¿ã‚„ã™ã„æ–¹æ³•ã§ã™ã€‚

### æ–¹æ³• 2: Dev Container CLI

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ç›´æ¥æ“ä½œã—ãŸã„å ´åˆã¯ **Dev Container CLI** ã‚’ä½¿ã„ã¾ã™ã€‚

```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g @devcontainers/cli

# ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•
devcontainer up --workspace-folder .

# ã‚³ãƒ³ãƒ†ãƒŠå†…ã«å…¥ã‚‹
devcontainer exec --workspace-folder . zsh

# Claude Code ã‚’èµ·å‹•
claude
```

ã‚¨ãƒ‡ã‚£ã‚¿ã«ä¾å­˜ã—ãªã„ã®ã§ã€Vim/Neovim ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„è¤‡æ•°ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ã„åˆ†ã‘ã‚‹äººã«ä¾¿åˆ©ã§ã™ã€‚

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### ã‚¹ãƒ†ãƒƒãƒ— 1: å‰ææ¡ä»¶

- Docker Desktop ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨
- VS Code + Dev Containers æ‹¡å¼µæ©Ÿèƒ½ã€ã¾ãŸã¯ Dev Container CLI

### ã‚¹ãƒ†ãƒƒãƒ— 2: devcontainer.json ã‚’ä½œæˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã« `.devcontainer/devcontainer.json` ã‚’ä½œæˆã—ã¾ã™ã€‚

#### å€‹äººãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã® ~/.claude ã‚’ä½¿ã†ï¼‰

```json
{
  "name": "My Personal Project",
  "image": "mcr.microsoft.com/devcontainers/javascript-node:20",

  "mounts": [
    "source=${localEnv:HOME}/.claude,target=/home/node/.claude,type=bind",
    "source=${localEnv:HOME}/.gitconfig,target=/home/node/.gitconfig,type=bind,consistency=cached"
  ],

  "postCreateCommand": "npm install -g @anthropic-ai/claude-code",

  "remoteUser": "node"
}
```

**ãƒã‚¤ãƒ³ãƒˆ**: `type=bind` ã§ãƒ­ãƒ¼ã‚«ãƒ«ã® `~/.claude` ã‚’ç›´æ¥ãƒã‚¦ãƒ³ãƒˆã€‚è¨­å®šã‚„å±¥æ­´ãŒãƒ­ãƒ¼ã‚«ãƒ«ã¨å…±æœ‰ã•ã‚Œã¾ã™ã€‚

:::message alert
**macOS ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®æ³¨æ„**: macOS ã§ã¯ Claude Code ã®èªè¨¼æƒ…å ±ï¼ˆOAuth ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ã¯ `~/.claude` ã§ã¯ãªã **Keychain** ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚ãã®ãŸã‚ã€bind ãƒã‚¦ãƒ³ãƒˆã—ã¦ã‚‚**åˆå›ã¯èªè¨¼ãŒå¿…è¦**ã§ã™ã€‚

ãŸã ã—ã€ä¸€åº¦ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚Œã°èªè¨¼æƒ…å ±ãŒã‚³ãƒ³ãƒ†ãƒŠå†…ã® `~/.claude` ã«ä¿å­˜ã•ã‚Œã‚‹ãŸã‚ã€æ¬¡å›ä»¥é™ã¯å†èªè¨¼ãªã—ã§ä½¿ç”¨ã§ãã¾ã™ã€‚
:::

#### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”¨ï¼ˆéš”é›¢ã•ã‚ŒãŸãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’ä½¿ã†ï¼‰

```json
{
  "name": "Client A Project",
  "image": "mcr.microsoft.com/devcontainers/javascript-node:22", // é©å®œå¤‰æ›´

  "mounts": [
    "source=claude-client-a,target=/home/node/.claude,type=volume",
    "source=${localEnv:HOME}/.gitconfig,target=/home/node/.gitconfig,type=bind,consistency=cached"
  ],

  "postCreateCommand": "sudo chown -R node:node /home/node/.claude && npm install -g @anthropic-ai/claude-code",

  "remoteUser": "node"
}
```

**ãƒã‚¤ãƒ³ãƒˆ**: `type=volume` ã§ Docker ç®¡ç†ã®éš”é›¢ã•ã‚ŒãŸãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’ä½¿ç”¨ã€‚ãƒ­ãƒ¼ã‚«ãƒ«ã® `~/.claude` ã«ã¯ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã€‚ãƒœãƒªãƒ¥ãƒ¼ãƒ åï¼ˆ`claude-client-a`ï¼‰ã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã”ã¨ã«å¤‰æ›´ã—ã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 3: èµ·å‹•

**VS Code ã®å ´åˆ**:
ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆ â†’ ã€ŒDev Containers: Reopen in Containerã€

**CLI ã®å ´åˆ**:
```bash
devcontainer up --workspace-folder .
devcontainer exec --workspace-folder . zsh
claude
```

åˆå›èµ·å‹•æ™‚ã« Claude Code ã«ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨ã€èªè¨¼æƒ…å ±ãŒãƒœãƒªãƒ¥ãƒ¼ãƒ ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ— 4: åˆ¥ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’è¿½åŠ 

æ–°ã—ã„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ãƒœãƒªãƒ¥ãƒ¼ãƒ åã‚’å¤‰æ›´ã™ã‚‹ã ã‘ã§ã™ã€‚

```json
{
  "mounts": [
    "source=claude-client-b,target=/home/node/.claude,type=volume"
  ]
}
```

### Docker Compose ã‚’ä½¿ã†å ´åˆ

`node_modules` ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ãªã©ã§ Docker Compose ã‚’ä½¿ã„ãŸã„å ´åˆã€æ§‹æ–‡ãŒå°‘ã—ç•°ãªã‚Šã¾ã™ã€‚

#### å€‹äººãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç”¨ï¼ˆcompose.yamlï¼‰

```yaml
volumes:
  node_modules:

services:
  app:
    image: mcr.microsoft.com/devcontainers/typescript-node:20
    volumes:
      - ..:/workspaces/my-project:cached
      - node_modules:/workspaces/my-project/node_modules
      - ${HOME}/.claude:/home/node/.claude           # bind mount
      - ${HOME}/.gitconfig:/home/node/.gitconfig:ro
    tty: true
    stdin_open: true
```

#### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”¨ï¼ˆcompose.yamlï¼‰

```yaml
volumes:
  node_modules:
  claude-client-a:

services:
  app:
    image: mcr.microsoft.com/devcontainers/typescript-node:20
    volumes:
      - ..:/workspaces/client-project:cached
      - node_modules:/workspaces/client-project/node_modules
      - claude-client-a:/home/node/.claude           # Docker volume
      - ${HOME}/.gitconfig:/home/node/.gitconfig:ro
    tty: true
    stdin_open: true
```

#### æ§‹æ–‡ã®é•ã„

| è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« | ç’°å¢ƒå¤‰æ•° |
|-------------|----------|
| devcontainer.json | `${localEnv:HOME}` |
| compose.yaml | `${HOME}` |

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

`.claude/settings.json` ã§ Claude Code ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’åˆ¶å¾¡ã§ãã¾ã™ï¼ˆDev Container ã®æœ‰ç„¡ã«é–¢ã‚ã‚‰ãšä½¿ãˆã‚‹æ©Ÿèƒ½ã§ã™ï¼‰ã€‚

```json
{
  "permissions": {
    "deny": [
      "Read(./.env*)",
      "Read(./secrets/**)",
      "Read(~/.ssh/**)",
      "Read(~/.aws/**)",
      "Bash(curl:*)",
      "Bash(wget:*)",
      "Bash(git push:--force)"
    ],
    "ask": [
      "Bash(git:*)",
      "Bash(yarn:add*)",
      "Bash(rm:*)"
    ]
  }
}
```

- **deny**: å®Œå…¨ã«ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆç¢ºèªãªã—ã§æ‹’å¦ï¼‰
- **ask**: å®Ÿè¡Œå‰ã«ç¢ºèªãŒå…¥ã‚‹

## æ—¥å¸¸çš„ãªä½¿ã„æ–¹

![è¤‡æ•°ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã®ä¸¦è¡Œä½œæ¥­](/images/claude-code-devcontainer-multi-client/multi-client-terminal.jpeg)

```bash
# ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ A ã§ä½œæ¥­
cd ~/projects/client-a
devcontainer exec --workspace-folder . zsh
claude

# ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ B ã§ä½œæ¥­ï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰
cd ~/projects/client-b
devcontainer exec --workspace-folder . zsh
claude
```

ä¸¡æ–¹ã®ã‚³ãƒ³ãƒ†ãƒŠãŒåŒæ™‚ã«å‹•ä½œã—ã¦ã‚‚ã€äº’ã„ã«å¹²æ¸‰ã—ã¾ã›ã‚“ã€‚

## ãƒœãƒªãƒ¥ãƒ¼ãƒ ç®¡ç†

```bash
# å…¨ã¦ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”¨ãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’ç¢ºèª
docker volume ls | grep claude-client

# èªè¨¼æƒ…å ±ã‚’ãƒªã‚»ãƒƒãƒˆã—ãŸã„å ´åˆ
docker volume rm claude-client-a
```

## æ—¢çŸ¥ã®æ³¨æ„ç‚¹

Dev Container ç’°å¢ƒã§ Claude Code ã‚’ä½¿ã†éš›ã«ã€ã„ãã¤ã‹ã®åˆ¶é™ãŒã‚ã‚Šã¾ã™ã€‚

### VS Code æ‹¡å¼µæ©Ÿèƒ½ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚³ãƒãƒ³ãƒ‰ãŒèªè­˜ã•ã‚Œãªã„
2025/12/05 æ™‚ç‚¹ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã® `~/.claude/commands/` ã«å®šç¾©ã—ãŸã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã¯ã€**CLI ã§ã¯ä½¿ãˆã¾ã™ãŒã€VS Code æ‹¡å¼µæ©Ÿèƒ½ã§ã¯èªè­˜ã•ã‚Œã¾ã›ã‚“**ã€‚

```bash
# CLIï¼ˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰ã§ã¯å‹•ä½œã™ã‚‹
claude
> /your:custom-command  # âœ… ä½¿ãˆã‚‹

# VS Code æ‹¡å¼µæ©Ÿèƒ½ã§ã¯å‹•ä½œã—ãªã„
> /your:custom-command  # âŒ èªè­˜ã•ã‚Œãªã„
```

ã“ã‚Œã¯ Claude Code ã®æ—¢çŸ¥ã®å•é¡Œã¨ã—ã¦å ±å‘Šã•ã‚Œã¦ã„ã¾ã™ã€‚

- [Issue #8569 - Missing slash commands in VS Code extension](https://github.com/anthropics/claude-code/issues/8569)
- [Issue #8831 - Custom slash commands not discovered](https://github.com/anthropics/claude-code/issues/8831)

**å›é¿ç­–**:

1. **VS Code ã®è¨­å®šã§ `claudeCode.useTerminal` ã‚’ `true` ã«ã™ã‚‹** - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ™ãƒ¼ã‚¹ã§å‹•ä½œã™ã‚‹ãŸã‚ã€ã“ã®å•é¡ŒãŒç™ºç”Ÿã—ã¾ã›ã‚“
2. Dev Container å†…ã§ CLI (`claude` ã‚³ãƒãƒ³ãƒ‰) ã‚’ç›´æ¥ä½¿ç”¨ã™ã‚‹
3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ­ãƒ¼ã‚«ãƒ«ã® `.claude/commands/` ã«ã‚³ãƒãƒ³ãƒ‰ã‚’é…ç½®ã™ã‚‹

ãŸã ã—ã€èµ·å‹•ãŒã¡ã‚‡ã£ã¨é…ã„ã®ãŒé›£ç‚¹ã§ã™ã€‚

### Skills ã¨ Commands ã®æ··åŒ

VS Code æ‹¡å¼µæ©Ÿèƒ½ã§ã¯ã€`.claude/skills/` ã«é…ç½®ã—ãŸ Skills ãŒ `/` ã®ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã«ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ Skills ã¨ Commands ã®å¢ƒç•ŒãŒæ›–æ˜§ãªè¨­è¨ˆä¸Šã®å•é¡Œã§ã™ã€‚

- [Issue #10246 - Add Skill Autocomplete to CLI](https://github.com/anthropics/claude-code/issues/10246)
- [Issue #10768 - Skills Natural Language Matching Broken](https://github.com/anthropics/claude-code/issues/10768)

## ã¾ã¨ã‚

- **å®Œå…¨ãªéš”é›¢**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–“ã§æƒ…å ±ãŒæ··ã–ã‚‹ã“ã¨ãŒæŠ€è¡“çš„ã«ä¸å¯èƒ½
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: ç’°å¢ƒå¤‰æ•°ã‚„ SSH ã‚­ãƒ¼ã‚’ Claude ã‹ã‚‰ä¿è­·
- **ç›£æŸ»è¨¼è·¡**: ã©ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã©ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ã£ãŸã‹æ˜ç¢º
- **ãƒ­ã‚°ã‚¤ãƒ³åˆ‡ã‚Šæ›¿ãˆä¸è¦**: ã‚³ãƒ³ãƒ†ãƒŠã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã ã‘ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚‚è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ

VS Code ã® Dev Containers æ‹¡å¼µæ©Ÿèƒ½ã‹ Dev Container CLI ã‚’ä½¿ã£ã¦ã€å®‰å…¨ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ¯ãƒ¼ã‚¯ã‚’é€²ã‚ã¾ã—ã‚‡ã†ã€‚
