---
title: "CSS Stickyが効かない？サイドバーで使うためのベストプラクティスとよくあるNGパターン"
emoji: "🔥"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["css", "sticky"]
published: false
---
## はじめに

`position: sticky;`は非常に便利なCSSプロパティですが、うまく動作しないことがあります。この記事では、サイドバーで`sticky`を効果的に使うためのベストプラクティスと、避けるべきNGパターンについて解説します。

## よくあるパターン

### パターン1: スティッキーが上部に固定

```css
.container-1 {
  display: flex;
  .right-container {
    position: sticky;
    top: 0;
    align-self: flex-start;
  }
}
```

この方法では、`.right-container`が上部に固定されます。`top: 0;`がキーとなります。

@[codepen](https://codepen.io/yahsan2/pen/OJrQmLx)

### パターン2: スティッキーが下部に固定

```css
.container-2 {
  display: flex;
  .right-container {
    align-self: flex-end;
    position: sticky;
    bottom: 0;
  }
}
```

ここでは、`.right-container`が下部に固定されます。`bottom: 0;`がキーとなります。

@[codepen](https://codepen.io/yahsan2/pen/abPqwpL)

### パターン3: スティッキーが上部に固定（last-child）

```css
.container-3 {
  display: flex;
  .right-container {
    .content:last-of-type {
      position: sticky;
      top: 0;
    }
  }
}
```

このパターンでは、`.content`の最後の子要素が上部に固定されます。

@[codepen](https://codepen.io/yahsan2/pen/oNJEwBd)

### パターン4: スティッキーが下部に固定（first-child）

```css
.container-4 {
  display: flex;
  .right-container {
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    .content:first-of-type {
      position: sticky;
      bottom: 0;
    }
  }
}
```

`.content`の最初の子要素が下部に固定されます。

@[codepen](https://codepen.io/yahsan2/pen/VwqQWpB)

### パターン5: 動的なサイドコンテンツの高さ調整

```css
.container-5 {
  display: flex;
  .right-container {
    align-self: flex-end;
    position: sticky;
    bottom: 0;
    min-height: 100vh;
  }
}
```

こちらは、`.right-container`の高さが動的に変わる場合に有用です。

@[codepen](https://codepen.io/yahsan2/pen/jOXZwLW)

## NGパターン: `Sticky`が効かない時のチェックリスト

### 親要素での`overflow: hidden`の問題

親要素や祖先要素に`overflow: hidden`が設定されていると、`sticky`は効きません。

### スティッキー要素の親の高さ問題

親要素が十分な高さを持っていない場合、`sticky`は効きません。

### スティッキー要素がストレッチまたは100%の高さ

要素が親要素に対して100%の高さを持つ場合、またはFlexboxの`align-items: stretch;`が適用されている場合、`sticky`は効きません。

### スティッキー要素に正確な`top`または`bottom`が設定されていない

`top`や`bottom`の値が正しく設定されていないと、`sticky`は期待通りに動作しない可能性があります。

## まとめ

CSSの`position: sticky;`を用いたサイドバーのデザインは、非常に便利ですが注意が必要です。この記事で紹介したベストプラクティスとNGパターンを頭に入れて、トラブルを未然に防ぎましょう！

## 参考リンク

- [MDN Web Docs: position - CSS](https://developer.mozilla.org/ja/docs/Web/CSS/position)
