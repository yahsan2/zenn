---
title: "大きい画像の Blob をそのまま <img> で読み込むと FireFox と Edge で失敗する"
emoji: "📚"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["TailWindo"]
published: false
---

URL: createObjectURL

「サイズの大きい画像を Data URI を <img> で読み込むと FireFox と Edge で読み込み失敗する」というタイトルの技術記事を書きたいので、以下の内容を元に記事を作成してください。

1. fileReader.readAsDataURL メソッドを利用して Data URI として読み込む方法を使うと Chrome などでは正常に読み込める。
2. FireFox でも約 25MB までのファイルまでなら読み込める。
3. FireFox で Data URI として読み込む方法で大きい画像は <img> で読み込めない。
4. URL.createObjectURL を利用した方法だと どのブラウザでも正常に読み込める

## fileReader.readAsDataURL を利用した参考コード

```html
<input type="file" accept="image/*" onchange="loadFile1(event)" />
<img id="output1" />
```

```JavaScript
var loadFile1 = function(event) {
  var reader = new FileReader();
  reader.onload = function(){
    var output = document.getElementById('output1');
    output.src = reader.result;
  };
  reader.readAsDataURL(event.target.files[0]);
};
```

## URL.createObjectURL を利用した参考コード

```html
<input type="file" accept="image/*" onchange="loadFile2(event)" />
<img id="output2" />
```

```JavaScript
var loadFile2 = function(event) {
  var output = document.getElementById('output2');
  output.src = URL.createObjectURL(event.target.files[0]);
  output.onload = function() {
    URL.revokeObjectURL(output.src) // free memory
  }
};
```
