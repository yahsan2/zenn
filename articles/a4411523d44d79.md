---
title: "å¤§ãã„ç”»åƒã® Blob ã‚’ãã®ã¾ã¾ <img> ã§èª­ã¿è¾¼ã‚€ã¨ FireFox ã¨ Edge ã§å¤±æ•—ã™ã‚‹"
emoji: "ğŸ“š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["TailWindo"]
published: false
---

URL: createObjectURL

ã€Œã‚µã‚¤ã‚ºã®å¤§ãã„ç”»åƒã‚’ Data URI ã‚’ <img> ã§èª­ã¿è¾¼ã‚€ã¨ FireFox ã¨ Edge ã§èª­ã¿è¾¼ã¿å¤±æ•—ã™ã‚‹ã€ã¨ã„ã†ã‚¿ã‚¤ãƒˆãƒ«ã®æŠ€è¡“è¨˜äº‹ã‚’æ›¸ããŸã„ã®ã§ã€ä»¥ä¸‹ã®å†…å®¹ã‚’å…ƒã«è¨˜äº‹ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

1. fileReader.readAsDataURL ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ©ç”¨ã—ã¦ Data URI ã¨ã—ã¦èª­ã¿è¾¼ã‚€æ–¹æ³•ã‚’ä½¿ã†ã¨ Chrome ãªã©ã§ã¯æ­£å¸¸ã«èª­ã¿è¾¼ã‚ã‚‹ã€‚
2. FireFox ã§ã‚‚ç´„ 25MB ã¾ã§ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¾ã§ãªã‚‰èª­ã¿è¾¼ã‚ã‚‹ã€‚
3. FireFox ã§ Data URI ã¨ã—ã¦èª­ã¿è¾¼ã‚€æ–¹æ³•ã§å¤§ãã„ç”»åƒã¯ <img> ã§èª­ã¿è¾¼ã‚ãªã„ã€‚
4. URL.createObjectURL ã‚’åˆ©ç”¨ã—ãŸæ–¹æ³•ã ã¨ ã©ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚‚æ­£å¸¸ã«èª­ã¿è¾¼ã‚ã‚‹

## fileReader.readAsDataURL ã‚’åˆ©ç”¨ã—ãŸå‚è€ƒã‚³ãƒ¼ãƒ‰

```html
<input type="file" accept="image/*" onchange="loadFile1(event)" />
<img id="output1" />
```

```JavaScript
var loadFile1 = function(event) {
  var reader = new FileReader();
  reader.onload = function(){
    var output = document.getElementById('output1');
    output.src = reader.result;
  };
  reader.readAsDataURL(event.target.files[0]);
};
```

## URL.createObjectURL ã‚’åˆ©ç”¨ã—ãŸå‚è€ƒã‚³ãƒ¼ãƒ‰

```html
<input type="file" accept="image/*" onchange="loadFile2(event)" />
<img id="output2" />
```

```JavaScript
var loadFile2 = function(event) {
  var output = document.getElementById('output2');
  output.src = URL.createObjectURL(event.target.files[0]);
  output.onload = function() {
    URL.revokeObjectURL(output.src) // free memory
  }
};
```
