---
title: "å¤§ãã„ç”»åƒã® Blob ã‚’ãã®ã¾ã¾ <img> ã§èª­ã¿è¾¼ã‚€ã¨ FireFox ã¨ Edge ã§å¤±æ•—ã™ã‚‹"
emoji: "ğŸ“š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["TailWindo"]
published: true
---

# FireFox ã§å¤§ãã„ç”»åƒãŒè¡¨ç¤ºã•ã‚Œãªã„ï¼ŸfileReader.readAsDataURL ãƒ¡ã‚½ãƒƒãƒ‰ã®æ³¨æ„ç‚¹ã¨è§£æ±ºç­–

FireFox ã§ç”»åƒãŒè¡¨ç¤ºã•ã‚Œãªã„å•é¡Œã«é­é‡ã—ã¦ã„ã‚‹æ–¹ã¯ã€æœ¬è¨˜äº‹ãŒè§£æ±ºã®æ‰‹åŠ©ã‘ã«ãªã‚‹ã“ã¨ã§ã—ã‚‡ã†ã€‚ç‰¹ã«ã€å¤§ããªç”»åƒã‚’ Data URI ã¨ã—ã¦èª­ã¿è¾¼ã‚€éš›ã«ç™ºç”Ÿã™ã‚‹å•é¡Œã¨ã€ãã‚Œã‚’è§£æ±ºã™ã‚‹æ–¹æ³•ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã„ã¾ã™ã€‚

## å•é¡Œã®æ¦‚è¦

### fileReader.readAsDataURL ãƒ¡ã‚½ãƒƒãƒ‰ã®åˆ©ç”¨

ä»¥ä¸‹ã®æ–¹æ³•ã¯ã€å¤šãã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã†ã¾ãæ©Ÿèƒ½ã—ã¾ã™ãŒã€FireFox ã§ã®å¤§ãã„ç”»åƒã®è¡¨ç¤ºã«ã¯å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚

#### å‚è€ƒã‚³ãƒ¼ãƒ‰

```html
<input type="file" accept="image/*" onchange="loadFile1(event)" />
<img id="output1" />
```

```js
var loadFile1 = function (event) {
  var reader = new FileReader();
  reader.onload = function () {
    var output = document.getElementById("output1");
    output.src = reader.result;
  };
  reader.readAsDataURL(event.target.files[0]);
};
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€FireFox ã§ã¯ä»¥ä¸‹ã®å•é¡ŒãŒç™ºç”Ÿã—ã¾ã™ã€‚

- ç´„ 25MB ã¾ã§ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã®ç”»åƒã®ã¿ãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹
- å¤§ãã„ç”»åƒã¯`<img>`ã‚¿ã‚°ã§è¡¨ç¤ºã§ããªã„

## è§£æ±ºç­–

### URL.createObjectURL ãƒ¡ã‚½ãƒƒãƒ‰ã®åˆ©ç”¨

å¤§ãã„ç”»åƒãŒè¡¨ç¤ºã•ã‚Œãªã„å•é¡Œã«å¯¾ã—ã¦ã€ä»¥ä¸‹ã®æ–¹æ³•ãŒåŠ¹æœçš„ãªè§£æ±ºç­–ã¨ãªã‚Šã¾ã™ã€‚

#### å‚è€ƒã‚³ãƒ¼ãƒ‰

```html
<input type="file" accept="image/*" onchange="loadFile2(event)" />
<img id="output2" />
```

```js
var loadFile2 = function (event) {
  var output = document.getElementById("output2");
  output.src = URL.createObjectURL(event.target.files[0]);
  output.onload = function () {
    URL.revokeObjectURL(output.src); // free memory
  };
};
```

## ã¾ã¨ã‚

fileReader.readAsDataURL ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã„ã¦ FireFox ã§å¤§ãã„ç”»åƒãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆã€URL.createObjectURL ãƒ¡ã‚½ãƒƒãƒ‰ã®åˆ©ç”¨ãŒåŠ¹æœçš„ã§ã™ã€‚
